= terraform-aws-lambda-edge-authentication

== Create the configuration file

Sample:
[source,json]
----
{
  /* store usernames and password for basic authentication of HTTP users in "htpasswd" Format */
  "htpasswd": "test:$apr1$uRhlu4OE$c5XdFhXUjm9PJtyyhI8WN/",

  /* wildcard matching uris */
  "uriPatterns": [
    "/*.{png,txt}"
  ]
}
----

The module use https://github.com/micromatch/micromatch[micromatch] to implement wildcard and glob matching URIs. +
So all https://github.com/micromatch/micromatch#matching-features[Micromatch Features] is supported

Blacklisting Files in example bellow require Basic Authentication to view
[source,json]
----
[
  "/sample.png", // protect particular file
  "/sample/*.png" //Protect all files inside a subdirectory
]
----

Whitelisting publicly accessible files
[source,json]
----
[
  "!/sample.png" // not protect particular file => others are protected
]
----


== Development
  1. Run `npm run build` to build the lambda typescript code => `main.js` is generated
  2. Rerun `terraform apply` to upload new `main.js` (webpack compiled entry)